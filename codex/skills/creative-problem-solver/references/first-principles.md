# Technique: First Principles (rebuild from facts)

## One-liner
問題を事実まで分解し、仮定と切り分け、最小モデルと不変条件から解を再構築する。

## Use when
- 「昔からこうしている」で惰性運用している疑いがある。
- 既存フレーミングが政治・歴史事情に引っ張られている。
- 「必須条件」と「任意条件」を明確にしたい。

## Avoid when
- 主な難しさが感情や合意形成（先にSix Thinking Hats）。
- 既に高確度計画があり、実行だけが必要。

## Inputs
- Goal: 1文。
- Context: 実際に変える対象（システム/人/プロセス）。

## Procedure (fast, 6–12 min)
1. Facts: 真だと考える事実を5〜10個書く（観測値・計測値）。
2. Assumptions: 仮定を5〜10個書く（誤っている可能性があるもの）。
3. Invariants: 壊してはいけない条件を定義（安全、信頼、正しさ、ポリシー）。
4. Minimal model: 最小の機構文を書く（例: 「レイテンシの主因はネットワークホップ」）。
5. Rebuild: 不変条件を満たす3案を作り、実験に変換する。

## Procedure (full, 20–35 min)
1. システム境界を決める。
   - 何がスコープ内で、何が外か。
2. 目標を分解する。
   - 成果指標 + 制約（時間/リスク/コスト）。
3. Facts vs assumptions を分ける。
   - 事実は観測可能または十分検証済み。
   - 仮定は「検証対象の未知」にする。
4. 制約/不変条件を導出する。
   - 「必ず〜する」文で書く。
5. プリミティブから組み立てる。
   - 例: キュー、キャッシュ、責任分担、インセンティブ、インターフェース、フィードバックループ。
6. 収束する。
   - もっともシグナルが取れ、可逆な最小案を選ぶ。

## Prompt bank (copy/paste)
- 「信じていることではなく、計測で“分かっていること”は何か？」
- 「都合が良いから置いている仮定は何か？」
- 「絶対に破ってはいけない不変条件は何か？」
- 「ゼロから作り直すなら、どのプリミティブを使うか？」
- 「中核仮定を試す最安の実験は何か？」

## Outputs (feed CPS portfolio)
- 事実リスト + 仮定リスト。
- 最小機構モデル。
- 不変条件を明示した再構築オプション1〜3件。

## Aha targets
- 「解の議論」から「機構の議論」へ切り替えられる。
- 真の制約（例: オーナーシップ、フィードバック速度）を特定できる。

## Pitfalls & defusals
- Pitfall: 仮定を事実扱いする → Defusal: 未知を明示ラベル化する。
- Pitfall: 分析麻痺 → Defusal: 時間制限し、最小モデルで止める。
- Pitfall: 現実無視の再設計 → Defusal: 制約と組織キャパシティを再確認する。

## Examples
### Engineering
Goal: API応答高速化。
Facts: p95は3つの下流呼び出しが支配、キャッシュヒット率が低い。
Assumptions: キャッシュは安全、データ鮮度劣化を許容可能。
Invariants: write時の正確性、監査可能性。
Rebuild: ホップ削減、鮮度予算付きキャッシュ、非同期検証。
Signal: p95改善。
Escape hatch: キャッシュフラグOFF。

### Mixed domain
Goal: 燃え尽き軽減。
Facts: 残業とコンテキストスイッチが相関、回復時間が不足。
Assumptions: 成功には常時「Yes」が必要。
Invariants: 重要関係と中核責務を維持。
Rebuild: 深い作業時間保護、コミット削減、回復儀式導入。
Signal: 週次エネルギースコア。
Escape hatch: 成果低下時に1コミットだけ戻す。
